[gd_scene load_steps=12 format=1]

[ext_resource path="res://scripts/level.gd" type="Script" id=1]
[ext_resource path="res://pics/slimewallall.png" type="Texture" id=2]
[ext_resource path="res://objects/slimeBlock.tscn" type="PackedScene" id=3]
[ext_resource path="res://objects/cogra.tscn" type="PackedScene" id=4]
[ext_resource path="res://pics/karkon.png" type="Texture" id=5]
[ext_resource path="res://pics/blood.png" type="Texture" id=6]
[ext_resource path="res://objects/statue.tscn" type="PackedScene" id=7]
[ext_resource path="res://objects/niceStatue.tscn" type="PackedScene" id=8]
[ext_resource path="res://objects/end.tscn" type="PackedScene" id=9]

[sub_resource type="RectangleShape2D" id=1]

custom_solver_bias = 0.0
extents = Vector2( 49.2146, 99.4269 )

[sub_resource type="GDScript" id=2]

script/source = "extends \"../scripts/dude.gd\"

onready var nice = preload(\"res://objects/niceStatue.tscn\")
onready var particle = get_node(\"particle\")
onready var dudes = get_node(\"/root/level/dudes\")
var health = 3
var timer = 4

func _process(delta):
	timer -= delta
	if (timer < 0):
		timer += 4
		var ib = nice.instance()
		dudes.add_child(ib)
		ib.set_pos(Vector2(randi() % 1024,randi() % 600 - 600))
		

func button():
	particle.set_emitting(true)
	health -= 1
	if (health == 0): queue_free()"

[node name="level" type="Node2D"]

script/script = ExtResource( 1 )
song = "finalBoss"

[node name="ParallaxBackground" type="ParallaxBackground" parent="."]

layer = -1
offset = Vector2( 0, 0 )
rotation = 0.0
scale = Vector2( 1, 1 )
scroll/offset = Vector2( 0, 0 )
scroll/base_offset = Vector2( 0, 0 )
scroll/base_scale = Vector2( 1, 1 )
scroll/limit_begin = Vector2( 0, 0 )
scroll/limit_end = Vector2( 0, 0 )
scroll/ignore_camera_zoom = true

[node name="ParallaxLayer" type="ParallaxLayer" parent="ParallaxBackground"]

motion/scale = Vector2( 0.2, 0 )
motion/offset = Vector2( 0, 0 )
motion/mirroring = Vector2( 1024, 0 )

[node name="Sprite" type="Sprite" parent="ParallaxBackground/ParallaxLayer"]

texture = ExtResource( 2 )
centered = false
region = true
region_rect = Rect2( 0, 0, 1024, 600 )

[node name="blocks" type="Node2D" parent="."]

[node name="block" parent="blocks" instance=ExtResource( 3 )]

transform/pos = Vector2( 1016.07, 26.5928 )

[node name="block1" parent="blocks" instance=ExtResource( 3 )]

transform/pos = Vector2( 156.962, 19.9446 )
transform/scale = Vector2( 0.0654598, 1 )

[node name="block2" parent="blocks" instance=ExtResource( 3 )]

transform/pos = Vector2( 432.862, 12.1884 )
transform/scale = Vector2( 0.0654598, 1 )

[node name="block3" parent="blocks" instance=ExtResource( 3 )]

transform/pos = Vector2( 739.787, 8.86429 )
transform/scale = Vector2( 0.0654598, 1 )

[node name="dudes" type="Node2D" parent="."]

[node name="cogra" parent="dudes" instance=ExtResource( 4 )]

editor/display_folded = true
transform/pos = Vector2( 158.778, -122.684 )

[node name="Camera2D" type="Camera2D" parent="dudes/cogra"]

anchor_mode = 1
rotating = false
current = true
zoom = Vector2( 1, 1 )
limit/left = 0
limit/top = -10000000
limit/right = 100000000
limit/bottom = 0
drag_margin/h_enabled = true
drag_margin/v_enabled = true
smoothing/enable = false
smoothing/speed = 5.0
drag_margin/left = 0.2
drag_margin/top = 0.2
drag_margin/right = 0.2
drag_margin/bottom = 0.6

[node name="monk" type="KinematicBody2D" parent="dudes"]

transform/pos = Vector2( 968.789, -177.937 )
input/pickable = false
shapes/0/shape = SubResource( 1 )
shapes/0/transform = Matrix32( 1, 0, 0, 1, 0, 0 )
shapes/0/trigger = false
collision/layers = 1
collision/mask = 1
collision/margin = 0.08
script/script = SubResource( 2 )

[node name="sprite" type="Sprite" parent="dudes/monk"]

texture = ExtResource( 5 )

[node name="CollisionShape2D" type="CollisionShape2D" parent="dudes/monk"]

shape = SubResource( 1 )
trigger = false
_update_shape_index = 0

[node name="particle" type="Particles2D" parent="dudes/monk"]

config/amount = 32
config/lifetime = 2.0
config/emit_timeout = 0.8
config/emitting = false
config/process_mode = 1
config/texture = ExtResource( 6 )
config/h_frames = 3
params/direction = 0.0
params/spread = 180.0
params/linear_velocity = 130.32
params/spin_velocity = 167.56
params/orbit_velocity = 0.0
params/gravity_direction = 0.0
params/gravity_strength = 0.0
params/radial_accel = 6.98
params/tangential_accel = 0.0
params/damping = 0.0
params/initial_angle = 0.0
params/initial_size = 1.0
params/final_size = 2.0
params/hue_variation = 1.0
params/anim_speed_scale = 1.0
params/anim_initial_pos = 0.0
randomness/direction = 1.0
randomness/spread = 1.0
randomness/linear_velocity = 0.16

[node name="statue" parent="dudes" instance=ExtResource( 7 )]

transform/pos = Vector2( 886.753, -203.736 )

[node name="statue1" parent="dudes" instance=ExtResource( 7 )]

transform/pos = Vector2( 591.629, -486.646 )

[node name="statue2" parent="dudes" instance=ExtResource( 7 )]

transform/pos = Vector2( 774.418, -380.309 )

[node name="statue 2" parent="dudes" instance=ExtResource( 8 )]

transform/pos = Vector2( 323.838, -177.959 )

[node name="end" parent="." instance=ExtResource( 9 )]

transform/pos = Vector2( 1300.17, -166.972 )
next = "res://scenes/story3.tscn"


